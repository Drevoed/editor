{"version":3,"file":"delete-backward.js","sourceRoot":"","sources":["delete-backward.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,WAAW,CAAA;AACnC,OAAO,EAAU,KAAK,EAAE,MAAM,OAAO,CAAA;AACrC,OAAO,EAAE,cAAc,EAAE,aAAa,EAAE,MAAM,sBAAsB,CAAC;AAMrE,MAAM,UAAU,cAAc,CAAC,MAAc;IAC3C,MAAM,OAAO,GAAoB,EAAE,OAAO,EAAE,IAAI,EAAE,CAAA;IAClD,MAAM,OAAO,GAAoB,EAAE,OAAO,EAAE,KAAK,EAAE,CAAA;IAEnD,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;QACrB,OAAO,OAAO,CAAA;KACf;IAED,IAAI,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE;QACtC,OAAO,OAAO,CAAA;KACf;IAED,MAAM,SAAS,GAAG,aAAa,CAAC,QAAQ,CAAC,MAAM,EAAE;QAC/C,IAAI,EAAE,OAAO;QACb,IAAI,EAAE,QAAQ;QACd,KAAK,EAAE,cAAc,CAAC,KAAK,CAAC,MAAM,EAAE,WAAW,CAAC;KACjD,CAAC,CAAA;IACF,IAAI,CAAC,SAAS;QAAE,OAAO,OAAO,CAAA;IAC9B,MAAM,CAAC,EAAE,QAAQ,CAAC,GAAG,SAAS,CAAA;IAE9B,MAAM,CAAC,OAAO,CAAC,GAAG,aAAa,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,QAAQ,EAAE,CAAC,CAAA;IAEnE,IAAI,CAAC,OAAO,EAAE;QACZ,OAAO,OAAO,CAAA;KACf;IAED,OAAO,CAAC,MAAM,CAAC,CAAA;IACf,OAAO,OAAO,CAAA;AAChB,CAAC","sourcesContent":["import { outdent } from './outdent'\nimport { Editor, Range } from 'slate'\nimport { GlobalMatchers, GlobalQueries } from \"@cardbox-editor/core\";\n\ninterface TransformResult {\n  handled: boolean\n}\n\nexport function deleteBackward(editor: Editor): TransformResult {\n  const handled: TransformResult = { handled: true }\n  const skipped: TransformResult = { handled: false }\n\n  if (!editor.selection) {\n    return skipped\n  }\n\n  if (Range.isExpanded(editor.selection)) {\n    return skipped\n  }\n\n  const itemEntry = GlobalQueries.getAbove(editor, {\n    type: 'block',\n    mode: 'lowest',\n    match: GlobalMatchers.block(editor, 'list-item'),\n  })\n  if (!itemEntry) return skipped\n  const [, itemPath] = itemEntry\n\n  const [isStart] = GlobalQueries.isOnEdges(editor, { of: itemPath })\n\n  if (!isStart) {\n    return skipped\n  }\n\n  outdent(editor)\n  return handled\n}\n"]}