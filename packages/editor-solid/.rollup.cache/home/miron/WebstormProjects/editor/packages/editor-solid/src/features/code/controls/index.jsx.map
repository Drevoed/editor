{"version":3,"file":"index.jsx","sourceRoot":"","sources":["index.tsx"],"names":[],"mappings":"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","sourcesContent":["import { useEditor, usePath } from '../../../lib/hooks/slate'\nimport {\n  BlockMenuContent,\n  BlockMenuSection,\n  useControlsState,\n} from '../../left-controls'\nimport { PRISM_LANGUAGES } from '../constants'\nimport { Transforms } from 'slate'\nimport styled from 'solid-styled-components'\nimport { unwrap } from \"solid-js/store\";\n\nexport const CodeControls: BlockMenuSection = (props) => {\n  const { element } = useControlsState()\n  if (element.type !== 'code') return null\n  return <Content {...props} />\n}\n\nconst Content: BlockMenuSection = ({ hide }) => {\n  const editor = useEditor()\n  const { element } = useControlsState()\n  const path = usePath(element)\n  const searchRef = useRef<HTMLInputElement | null>(null)\n  const [search, setSearch] = useState('')\n\n  const setLanguage = (language: string) => {\n    Transforms.setNodes(editor, { language }, { at: path })\n    hide()\n  }\n\n  const matchedLanguages = useMemo(() => {\n    return PRISM_LANGUAGES.filter((language) => {\n      return language.name.toLowerCase().includes(search.toLowerCase())\n    })\n  }, [search])\n\n  useEffect(() => {\n    if (!searchRef.current) return\n    searchRef.current.focus()\n  }, [])\n\n  if (element.type !== 'code') return null\n\n  return (\n    <BlockMenuContent.Section name=\"Select code language\">\n      <BlockMenuContent.Container>\n        <InputWrapper>\n          <Icon>{searchIcon}</Icon>\n          <Input\n            ref={searchRef}\n            value={search}\n            onChange={(event) => setSearch(event.target.value)}\n          />\n        </InputWrapper>\n      </BlockMenuContent.Container>\n      <BlockMenuContent.List style={{ maxHeight: 200, overflow: 'auto' }}>\n        {matchedLanguages.map((language) => {\n          const isSelected = language.grammarName === element.language\n\n          return (\n            <BlockMenuContent.Item\n              key={language.name}\n              name={language.name}\n              onClick={() => setLanguage(language.grammarName)}\n              style={{ color: isSelected ? 'rgb(56, 132, 255)' : '' }}\n            />\n          )\n        })}\n      </BlockMenuContent.List>\n    </BlockMenuContent.Section>\n  )\n}\n\nexport const InputWrapper = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  border: 1px solid #e4e4ea;\n  border-radius: 3px;\n\n  &:focus-within {\n    border-color: #6494e2;\n  }\n`\n\nconst Icon = styled.div`\n  display: flex;\n  align-items: center;\n  height: 28px;\n  padding: 0 5px;\n  color: #b7c0ca;\n\n  & svg {\n    width: 16px;\n    height: 16px;\n  }\n`\n\nexport const searchIcon = (\n  <svg\n    preserveAspectRatio=\"xMidYMid meet\"\n    height=\"1em\"\n    width=\"1em\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    stroke=\"currentColor\"\n    className=\"icon-7f6730be--text-3f89f380\"\n  >\n    <g>\n      <circle cx=\"10.5\" cy=\"10.5\" r=\"7.5\" />\n      <line x1=\"21\" y1=\"21\" x2=\"15.8\" y2=\"15.8\" />\n    </g>\n  </svg>\n)\n\nexport const Input = styled.input`\n  width: 100%;\n  height: 28px;\n  padding: 0;\n  font-size: 14px;\n  line-height: 28px;\n  border: none;\n  background: transparent;\n  outline: none;\n  color: #1a1a23;\n`\n"]}