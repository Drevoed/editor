{"version":3,"file":"editable-editor.jsx","sourceRoot":"","sources":["editable-editor.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Editable, Slate } from 'slate-solid'\nimport { LinkPopup } from '../features/link'\nimport { useListeners } from '../features/listeners'\nimport { Toolbar } from '../features/toolbar'\nimport { ToolbarMarkButton } from '../features/toolbar/buttons'\nimport { useEditor } from '../lib/hooks/slate'\nimport { createParagraphElement } from '@cardbox-editor/core'\nimport { renderElement } from './render.element'\nimport { renderLeaf } from './render.leaf'\nimport { StyledEditor } from './styles'\nimport type { EditableEditorProps } from './types'\nimport { useKeybinds } from './use-keybinds'\nimport { decorations } from \"../registries/decorations\";\n\nexport const EditableEditor = ({\n  value,\n  onChange,\n  customKeybinds,\n}: EditableEditorProps) => {\n  const editor = useEditor()\n  const { handleKeyDown } = useKeybinds(customKeybinds)\n  const { handlePaste } = useListeners()\n\n  const handlePasteNative = useCallback(\n    (e: ClipboardEvent<HTMLDivElement>) => {\n      handlePaste(e.nativeEvent)\n    },\n    [handlePaste]\n  )\n\n  useEffect(() => {\n    if (value.length > 0) return\n    onChange([createParagraphElement()])\n  }, [value])\n\n  return (\n    <StyledEditor>\n      <Slate editor={editor} value={value} onChange={onChange}>\n        <Editable\n          renderElement={renderElement}\n          renderLeaf={renderLeaf}\n          onKeyDown={handleKeyDown}\n          onPaste={handlePasteNative}\n          decorate={decorations.createHandler(editor)}\n          readOnly={false}\n          autoFocus\n          autoCapitalize=\"false\"\n          autoCorrect=\"false\"\n          spellCheck=\"false\"\n        />\n      </Slate>\n\n      <ToolbarWithButtons />\n      <LinkPopup />\n    </StyledEditor>\n  )\n}\n\nconst ToolbarWithButtons = () => {\n  return (\n    <Toolbar\n      renderButtons={() => (\n        <>\n          <ToolbarMarkButton\n            mark=\"bold\"\n            icon=\"B\"\n            action=\"make-bold\"\n            tooltip=\"Bold (⌘B)\"\n            style={{ fontWeight: 'bold' }}\n          />\n          <ToolbarMarkButton\n            mark=\"italic\"\n            icon=\"I\"\n            action=\"make-italic\"\n            tooltip=\"Italic (⌘I)\"\n            style={{ fontStyle: 'italic' }}\n          />\n          <ToolbarMarkButton\n            mark=\"underlined\"\n            icon=\"U\"\n            action=\"make-underlined\"\n            tooltip=\"Underlined (⌘U)\"\n            style={{ textDecoration: 'underline' }}\n          />\n          <ToolbarMarkButton\n            mark=\"inlineCode\"\n            icon={\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"icon icon-tabler icon-tabler-code\"\n                width=\"24\"\n                height=\"24\"\n                viewBox=\"0 0 24 24\"\n                strokeWidth=\"2\"\n                stroke=\"currentColor\"\n                fill=\"none\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              >\n                <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n                <polyline points=\"7 8 3 12 7 16\" />\n                <polyline points=\"17 8 21 12 17 16\" />\n                <line x1=\"14\" y1=\"4\" x2=\"10\" y2=\"20\" />\n              </svg>\n            }\n            action=\"make-inline-code\"\n            tooltip=\"Inline-code (⌘E)\"\n            style={{ width: 18, height: 18, paddingLeft: 4 }}\n          />\n          <ToolbarMarkButton\n            mark=\"href\"\n            icon={\n              <svg\n                width=\"24\"\n                height=\"24\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  d=\"M14.8284 12L16.2426 13.4142L19.071 10.5858C20.6331 9.02365 20.6331 6.49099 19.071 4.9289C17.509 3.3668 14.9763 3.3668 13.4142 4.9289L10.5858 7.75732L12 9.17154L14.8284 6.34311C15.6095 5.56206 16.8758 5.56206 17.6568 6.34311C18.4379 7.12416 18.4379 8.39049 17.6568 9.17154L14.8284 12Z\"\n                  fill=\"currentColor\"\n                />\n                <path\n                  d=\"M12 14.8285L13.4142 16.2427L10.5858 19.0711C9.02372 20.6332 6.49106 20.6332 4.92896 19.0711C3.36686 17.509 3.36686 14.9764 4.92896 13.4143L7.75739 10.5858L9.1716 12L6.34317 14.8285C5.56212 15.6095 5.56212 16.8758 6.34317 17.6569C7.12422 18.4379 8.39055 18.4379 9.1716 17.6569L12 14.8285Z\"\n                  fill=\"currentColor\"\n                />\n                <path\n                  d=\"M14.8285 10.5857C15.219 10.1952 15.219 9.56199 14.8285 9.17147C14.4379 8.78094 13.8048 8.78094 13.4142 9.17147L9.1716 13.4141C8.78107 13.8046 8.78107 14.4378 9.1716 14.8283C9.56212 15.2188 10.1953 15.2188 10.5858 14.8283L14.8285 10.5857Z\"\n                  fill=\"currentColor\"\n                />\n              </svg>\n            }\n            action=\"set-link-for-text\"\n            tooltip=\"Link (⌘K)\"\n            style={{ width: 18, height: 18, paddingLeft: 4 }}\n          />\n        </>\n      )}\n    />\n  )\n}\n"]}