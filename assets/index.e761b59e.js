var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,c=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,s=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&c(e,n,t[n]);if(r)for(var n of r(t))i.call(t,n)&&c(e,n,t[n]);return e},a=(e,r)=>t(e,n(r));import{R as l,E as u,a as f,P as d,b as m,T as g,r as p,c as h,w as y,d as b,_ as v,t as k,e as x,f as E,g as w,j as O,S as P,h as S}from"./vendor.5f75ee00.js";const N=()=>({type:"paragraph",children:[{text:""}]}),T={paragraph:({attributes:e,children:t})=>l.createElement("p",s({},e),t)};function D(e){const t=T[e.element.type];return l.createElement(t,s({},e))}function C(e,t){const n=t,{type:c}=n,l=((e,t)=>{var n={};for(var c in e)o.call(e,c)&&t.indexOf(c)<0&&(n[c]=e[c]);if(null!=e&&r)for(var c of r(e))t.indexOf(c)<0&&i.call(e,c)&&(n[c]=e[c]);return n})(n,["type"]);if("leaf"===c){if(!e.selection)return;return u.leaf(e,e.selection)}return u.above(e,a(s({},l),{match:t=>u.isBlock(e,t)}))}function I(e){return f.isRange(e)?e.anchor:d.isPoint(e)?e:m.isPath(e)?{path:e,offset:0}:void 0}function _(e,t){if(!e.selection)return;const n=C(e,{type:"leaf"});if(!n)return;const[,r]=n,o=I(r);if(!o)return;const i=I(t.at||e.selection);if(!i)return;const c="string"==typeof t.matchString?[t.matchString]:t.matchString;e:for(const s of c){let n=s.split(""),r=i,c=i,a=i;for(;n.length>0;){const i=n.pop();if(!i)continue e;const l=u.before(e,r);if(!l)continue e;if(u.string(e,{anchor:l,focus:r})!==i){if(t.failOnInvalid)continue e;n=s.split("")}if(c=l,n.length+1===s.length&&(a=r),r=l,n.length>0&&d.equals(r,o))continue e}return"start"===t.edge?c:a}}const B=["bold","italic","underlined","inlineCode"];const L={getAbove:C,getPointFromLocation:I,getPointBefore:_,getRangeBefore:function(e,t){if(!e.selection)return;const n=_(e,a(s({},t),{edge:"start"}));if(!n)return;const r=I(e.selection);return r?{anchor:n,focus:r}:void 0},getRangeFromBlockStart:function(e){if(!e.selection)return;const t=C(e,{type:"block"});if(!t)return;const[,n]=t,r=u.start(e,n),o=I(e.selection);return o?{anchor:r,focus:o}:void 0},hasSelection:function(e){return!!e.selection&&f.isExpanded(e.selection)},leafHasModifications:function(e,t=B){return t.some((t=>e[t]))},leafModifications:function(e,t=B){return t.filter((t=>e[t]))}};const M={bold:"b",italic:"em",underlined:"u",inlineCode:"code"};const R=e=>function({leaf:e,children:t,attributes:n}){if(!L.leafHasModifications(e))return l.createElement("span",s({},n),t);const r=L.leafModifications(e);return r.reduce(((e,t,o)=>{const i=M[t],c=o===r.length-1?n:{};return l.createElement(i,c,e)}),t)}(e);function j(e){return l.createElement(R,s({},e))}var A="_editor_h7urf_1";const F=(e,t)=>{if(!e.selection)return;if(f.isExpanded(e.selection))return;const n=L.getAbove(e,{type:"block",mode:"lowest"});if(!n)return;const r=L.getAbove(e,{type:"leaf",mode:"lowest"});if(!r)return;const[,o]=n,[i]=r,c=u.end(e,o),a=f.start(e.selection);if(!d.equals(a,c))return;L.leafHasModifications(i)&&(t.preventDefault(),g.insertNodes(e,function(e,t={}){return s({text:e},t)}(" "),{select:!0}))},K=new KeyboardEvent("noop");function q({editor:e,entry:t}){if(t.onlyOnBlockStart)return function({editor:e,entry:t}){const n=L.getRangeFromBlockStart(e);if(!n)return{match:!1};const r=u.string(e,n);if(!r)return{match:!1};if(!t.markup.includes(r))return{match:!1};return{match:!0,range:n}}({editor:e,entry:t});if(!e.selection)return{match:!1};const n=L.getRangeBefore(e,{matchString:t.markup});return n?{match:!0,range:n}:{match:!1}}function H({editor:e,entry:t,range:n,insertText:r,block:o,leaf:i}){const{trigger:c=" ",keepTrigger:s=!0}=t,a=function({editor:e,entry:t,range:n}){const r=u.string(e,n);if(!r)return;if("after"===t.markupType)return"";const[o,i]=t.markup;return r.slice(o.length,-i.length)}({editor:e,entry:t,range:n});if(!a)return;const l="block"===t.transformType?function({editor:e,entry:t,range:n,text:r,block:o,leaf:i}){const c=t.transform({text:r,block:o,leaf:i});g.delete(e,{at:n}),g.setNodes(e,c,{match:t=>u.isBlock(e,t)})}({editor:e,entry:t,range:n,text:a,block:o,leaf:i}):function({editor:e,entry:t,range:n,text:r,block:o,leaf:i}){const c=t.transform({text:r,block:o,leaf:i});g.delete(e,{at:n}),g.insertNodes(e,c,{at:n.anchor,select:!0})}({editor:e,entry:t,range:n,text:a,block:o,leaf:i});return s&&("leaf"===t.transformType?F(e,K):r(c)),l}function V({text:e,editor:t,entry:n,insertText:r}){const{trigger:o=" ",skip:i=(()=>!1)}=n;if(e!==o)return{match:!1};const c=L.getAbove(t,{type:"block"}),s=L.getAbove(t,{type:"leaf"});if(!c)return{match:!1};if(!s)return{match:!1};const[a]=c,[l]=s;if(i({block:a,leaf:l}))return{match:!1};let f;return f="after"===n.markupType?q({editor:t,entry:n}):function({editor:e,entry:t}){const[n,r]=t.markup,o=L.getPointBefore(e,{edge:"end",matchString:r,failOnInvalid:!0});if(!o)return{match:!1};const i=u.before(e,o);if(!i)return{match:!1};const c=L.getPointBefore(e,{at:i,edge:"start",matchString:n});return c?{match:!0,range:{anchor:c,focus:o}}:{match:!1}}({editor:t,entry:n}),f.match&&H({editor:t,entry:n,range:f.range,block:a,leaf:l,insertText:r}),f}const W={format:function(e){return t=>function(e,t){const{insertText:n}=e;return e.insertText=r=>{if(L.hasSelection(e))return n(r);let o=0;for(const i of t){const{match:t}=V({text:r,editor:e,entry:i,insertText:n});t&&(o+=1)}o||n(r)},e}(t,e)}};const Y=[y,b];function z(e,t){const n=u.marks(e);n&&(n[t]?e.removeMark(t):e.addMark(t,!0))}const J=function(){const e=new Map,t=(t,n,r)=>{const o=e.get(t);o&&o(n,r)};return{register:(t,n)=>{e.set(t,n)},execute:t,curryExecute:e=>(n,r)=>{t(e,n,r)}}}();J.register("insert-soft-break",((e,t)=>{const{selection:n}=e;n&&(t.preventDefault(),e.insertText("\n"))})),J.register("insert-exit-break",((e,t)=>{if(!e.selection)return;t.preventDefault(),f.isExpanded(e.selection)&&g.delete(e,{at:e.selection});const n=L.getAbove(e,{type:"block",mode:"highest"});if(!n)return;const[,r]=n,[o,i]=u.edges(e,r),c=L.getPointFromLocation(e.selection);c&&(d.equals(c,i)?g.insertNodes(e,N(),{select:!0}):d.equals(c,o)?g.insertNodes(e,N(),{select:!1}):g.splitNodes(e,{mode:"highest"}))})),J.register("get-out-the-leaf",F),J.register("make-bold",((e,t)=>{t.preventDefault(),z(e,"bold")})),J.register("make-italic",((e,t)=>{t.preventDefault(),z(e,"italic")})),J.register("make-underlined",((e,t)=>{t.preventDefault(),z(e,"underlined")})),J.register("make-inline-code",((e,t)=>{t.preventDefault(),z(e,"inlineCode")}));const U={};const G=function({scope:e="global",stopAllEvents:t=!0}={}){U[e]||(U[e]=[]);const n=U[e];return{register:(e,t)=>{n.push({keybind:e,callback:t,is:v(e,{byKey:!0})})},unregister:e=>{const t=n.findIndex((t=>t.keybind===e));-1!==t&&n.splice(t,1)},unregisterAll:()=>{n.splice(0,n.length)},keyDown:(e,r)=>{const o=e instanceof Event?e:e.nativeEvent;t&&o.stopPropagation();for(const i of n){if(i.is(o)){t||o.stopPropagation(),i.callback(r,o);break}}}}}({scope:"slate-editor"}),Q={"insert-soft-break":"shift+enter","insert-exit-break":["enter","mod+enter"],"get-out-the-leaf":"arrowright","make-bold":"mod+b","make-italic":"mod+i","make-underlined":"mod+u","make-inline-code":["mod+e","mod+`"]};const X=p.exports.createContext({});function Z(){return p.exports.useContext(X)}var $="_container_1n318_1",ee="_icon_1n318_14";const te=({modification:e,icon:t,action:n,style:r={}})=>{const o=Z(),i=function(e,t){const n=u.marks(e);return!!n&&Boolean(n[t])}(o,e),c=(s=function(){const[,e]=p.exports.useReducer((e=>e+1),0);return e}(),a=300,p.exports.useMemo((()=>k(s,a)),[s,a]));var s,a;p.exports.useEffect((()=>(document.addEventListener("selectionchange",c),()=>document.removeEventListener("selectionchange",c))),[c]);return l.createElement("button",{className:$,"data-active":i,onClick:e=>{e.preventDefault(),J.execute(n,o,K)}},l.createElement("span",{className:ee,style:r},t))};var ne="_toolbar-container_1ij7b_1";const re=({children:e})=>{const t=function(){const e=Z(),t=p.exports.useRef(null);return p.exports.useLayoutEffect((()=>{const n=x.toDOMNode(e,e);t.current=n}),[e]),t}(),n=function(){const e=p.exports.useMemo((()=>{const e=document.createElement("div");return e.classList.add(ne),e}),[]);return p.exports.useEffect((()=>{const t=e=>e.preventDefault();return e.addEventListener("mousedown",t),()=>e.removeEventListener("mousedown",t)}),[e]),e}(),r=p.exports.useRef({anchor:Number.POSITIVE_INFINITY,focus:Number.POSITIVE_INFINITY});return p.exports.useEffect((()=>{if(!t.current)return;const e=E(t.current,{theme:"editor-light",content:n,placement:"top",trigger:"manual",interactive:!0,arrow:!1,offset:[0,10],moveTransition:"transform 0.1s ease-out"}),o=O((()=>{e.setProps({interactive:!0})}),300),i=()=>{if(!t.current)return;if(document.activeElement!==t.current)return e.hide();const n=window.getSelection();if(!n||n.isCollapsed)return e.hide();const i=function(e){return{anchor:e.anchorOffset,focus:e.focusOffset}}(n),c=(s=i,a=r.current,s.anchor===a.anchor&&s.focus===a.focus);var s,a;e.setProps({interactive:!c,getReferenceClientRect:()=>n.getRangeAt(0).getBoundingClientRect()}),c||o(),r.current=i,e.show()};return document.addEventListener("selectionchange",i),()=>{e.destroy(),document.removeEventListener("selectionchange",i)}}),[n,t]),w.createPortal(e,n)};const oe=({value:e,onChange:t,customKeybinds:n={},customExtensions:r=[]})=>{const o=function(e){return p.exports.useMemo((()=>{const t=[...Y,...e];return function(e,t){return t.reduce(((e,t)=>t(e)),e)}(h(),t)}),[W])}(r),{handleKeyDown:i}=function(e,t){return p.exports.useEffect((()=>{const e=s(s({},Q),t);G.unregisterAll(),Object.entries(e).forEach((([e,t])=>{if(!t)return;const n="string"==typeof t?[t]:t;for(const r of n)G.register(r,J.curryExecute(e))}))}),[t]),{handleKeyDown:p.exports.useCallback((t=>{G.keyDown(t,e)}),[e])}}(o,n);return l.createElement(X.Provider,{value:o},l.createElement(P,{editor:o,value:e,onChange:t},l.createElement(S,{className:A,renderElement:D,renderLeaf:j,onKeyDown:i,autoFocus:!0})),l.createElement(re,{editor:o},l.createElement(te,{modification:"bold",icon:"B",action:"make-bold",style:{fontWeight:"bold"}}),l.createElement(te,{modification:"italic",icon:"I",action:"make-italic",style:{fontStyle:"italic"}}),l.createElement(te,{modification:"underlined",icon:"U",action:"make-underlined",style:{textDecoration:"underline"}}),l.createElement(te,{modification:"inlineCode",icon:l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-code",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},l.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l.createElement("polyline",{points:"7 8 3 12 7 16"}),l.createElement("polyline",{points:"17 8 21 12 17 16"}),l.createElement("line",{x1:"14",y1:"4",x2:"10",y2:"20"})),action:"make-inline-code",style:{width:22,height:22}})))};const ie=()=>{const[e,t]=function(){const[e,t]=p.exports.useState([{type:"paragraph",children:[{text:"A line of text in a paragraph."}]}]);return p.exports.useEffect((()=>{console.log(JSON.stringify(e,null,2))}),[e]),[e,t]}();return l.createElement(oe,{value:e,onChange:t})};w.render(l.createElement(ie,null),document.querySelector("#root"));
